<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
  xmlns:a4j="http://richfaces.org/a4j" template="layout/template.xhtml">

  <ui:define name="body">
    <ui:include src="includes/gmap/gmapscripts.xhtml" />

    <h:form id="map_form">
      <rich:panel styleClass="panelbodyNoBorder">
        <rich:layout>
          <rich:layoutPanel position="top" width="100%" style="padding:3px;">
            <h:outputText styleClass="outputTextBig" value="Accueil De Quartier:" />
            <hr width="100%" />
          </rich:layoutPanel>
          <rich:layoutPanel position="left" width="#{webPage.leftColumnSize}%" style="padding:3px;">
            <h:panelGroup>
            </h:panelGroup>
          </rich:layoutPanel>
          <rich:layoutPanel position="center" width="#{webPage.centerColumnSize}%" style="padding:3px;">
            <rich:gmap mapType="G_NORMAL_MAP" gmapVar="map" gmapKey="#{globals.key}" lat="#{globals.dfltLat}"
              lng="#{globals.dfltLng}" zoom="10" oninit="init(map)" id="map3" style="width:550px"
              showGLargeMapControl="true" showGMapTypeControl="true" showGScaleControl="false" />
          </rich:layoutPanel>
          <rich:layoutPanel position="right" width="#{webPage.rightColumnSize}%" style="padding:3px;">
            <h:panelGroup>
            </h:panelGroup>
          </rich:layoutPanel>
          <rich:layoutPanel position="bottom" width="100%" style="padding:3px;">
            <hr />
            <rich:dataTable value="#{webPage.activeArticles}" var="article" id="articleTable" width="100%"
              border="none">
              <rich:column>
                <h:panelGrid columns="1" rendered="#{article.layout==0}">
                  <h:outputText escape="false" value="#{article.description}" />
                </h:panelGrid>
                <h:panelGrid columns="2" rendered="#{article.layout==1}">
                  <s:graphicImage fileName="buildPageLayout1-#{article.id}"
                    rendered="#{article.ilst.dataNotEmpty}" value="#{article.ilst.data}">
                    <s:transformImageSize width="#{article.ilstWidth}" maintainRatio="true" />
                  </s:graphicImage>
                  <h:outputText escape="false" value="#{article.description}" />
                </h:panelGrid>
                <h:panelGrid columns="2" rendered="#{article.layout==2}">
                  <h:outputText escape="false" value="#{article.description}" />
                  <s:graphicImage fileName="buildPageLayout1-#{article.id}"
                    rendered="#{article.ilst.dataNotEmpty}" value="#{article.ilst.data}">
                    <s:transformImageSize width="#{article.ilstWidth}" maintainRatio="true" />
                  </s:graphicImage>
                </h:panelGrid>
                <h:panelGrid columns="1" rendered="#{article.layout==3}">
                  <s:graphicImage fileName="buildPageLayout1-#{article.id}"
                    rendered="#{article.ilst.dataNotEmpty}" value="#{article.ilst.data}">
                    <s:transformImageSize width="#{article.ilstWidth}" maintainRatio="true" />
                  </s:graphicImage>
                </h:panelGrid>
                <h:panelGrid columns="1" rendered="#{article.layout==4}">
                  <h:outputText escape="false" value="#{article.description}" />
                  <s:graphicImage fileName="buildPageLayout1-#{article.id}"
                    rendered="#{article.ilst.dataNotEmpty}" value="#{article.ilst.data}">
                    <s:transformImageSize width="#{article.ilstWidth}" maintainRatio="true" />
                  </s:graphicImage>
                </h:panelGrid>
                <h:panelGrid columns="1" rendered="#{article.layout==5}">
                  <s:graphicImage fileName="buildPageLayout1-#{article.id}"
                    rendered="#{article.ilst.dataNotEmpty}" value="#{article.ilst.data}">
                    <s:transformImageSize width="#{article.ilstWidth}" maintainRatio="true" />
                  </s:graphicImage>
                  <h:outputText escape="false" value="#{article.description}" />
                </h:panelGrid>
              </rich:column>
            </rich:dataTable>
          </rich:layoutPanel>
        </rich:layout>
      </rich:panel>
    </h:form>

    <script type="text/javascript">    
            <ui:repeat var="gmapMbr" value="#{club.gmapAddressList}">
                addAssocMember(
                    '<h:outputText value="#{gmapMbr.assocName}"/>',
                    '<h:outputText value="#{gmapMbr.GMAPLat}"/>',
                    '<h:outputText value="#{gmapMbr.GMAPLng}"/>');
            </ui:repeat>
        </script>

  </ui:define>
</ui:composition>
